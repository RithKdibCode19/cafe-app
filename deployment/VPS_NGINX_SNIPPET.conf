
    # Cafe App (Second Project)
    server {
        listen 443 ssl;
        server_name your-second-domain.com; # REPLACE THIS with your actual domain

        # SSL Certs (Ensure these exist)
        ssl_certificate /etc/nginx/ssl/cert.pem;
        ssl_certificate_key /etc/nginx/ssl/key.pem;

        location / {
            # Proxy to Cafe App running on host port 8082
            # Use the Docker gateway IP (usually 172.17.0.1) or localhost if network_mode: host
            proxy_pass http://172.17.0.1:8082;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto https;
        }

        # Explicitly allow Swagger UI access
        location /swagger-ui/ {
            proxy_pass http://172.17.0.1:8082/swagger-ui/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto https;
        }
        
        location /v3/api-docs {
            proxy_pass http://172.17.0.1:8082/v3/api-docs;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto https;
        }
    }
